(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{16:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(17),o=t.n(c),r=t(3),u=t(7),i=t(2),a=t(4),l=t.n(a),s=t(0),d=function(e){var n=f(e.phonebook,e.filter_str);return Object(s.jsx)(s.Fragment,{children:n.map((function(n){return Object(s.jsxs)("p",{children:[" ",n.name," ",n.number,Object(s.jsx)("button",{onClick:function(){return e.deleteFunc(n)},children:"delete"},n.id)]},n.name)}))})},b=function(e){return Object(s.jsxs)("div",{children:[" filter name with:",Object(s.jsx)("input",{value:e.filter_str,onChange:e.actionFunc})]})},f=function(e,n){return e.filter((function(e){return e.name.includes(n)}))},j=function(e){return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("form",{children:[Object(s.jsxs)("div",{children:[" name:",Object(s.jsx)("input",{value:e.nameTxt,onChange:e.editNameFunc})]}),Object(s.jsxs)("div",{children:[" number:",Object(s.jsx)("input",{value:e.numTxt,onChange:e.editNumberFunc})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"button",onClick:e.onSubmitFunc,children:"add"})})]})})},m=(t(16),"/api/persons"),h=function(e){if(null===e.message)return null;console.log("TRING TO RENDER SOMETHING"),console.log(e.message);var n=e.message.includes("ailed")?"error":"notification";return Object(s.jsxs)("div",{className:n,children:[" ",e.message,"  "]})},O=function(){var e=Object(i.useState)(null),n=Object(r.a)(e,2),t=n[0],c=n[1],o=Object(i.useState)([]),a=Object(r.a)(o,2),f=a[0],O=a[1],g=Object(i.useState)(""),p=Object(r.a)(g,2),x=p[0],v=p[1],R=Object(i.useState)(""),E=Object(r.a)(R,2),T=E[0],F=E[1],k=Object(i.useState)(""),w=Object(r.a)(k,2),I=w[0],N=w[1];return Object(i.useEffect)((function(){console.log("fetching phonebook to UI"),l.a.get(m).then((function(e){console.log("fetced phonebook to UI"),O(e.data)})).catch((function(e){}))}),[]),console.log("render",f.length,"notes"),Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(h,{message:t}),Object(s.jsx)(b,{filter_str:I,actionFunc:function(e){return N(e.target.value)}}),Object(s.jsx)("h2",{children:"Add new contact"}),Object(s.jsx)(j,{onSubmitFunc:function(e){e.preventDefault();var n=f.findIndex((function(e){return e.name===x}));if(console.log(x),console.log(T),x&T)if(-1===n)(function(e,n){var t={name:e,number:n};return l.a.post(m,t).then((function(e){return e.data}))})(x,T).then((function(e){console.log("IIIIIMMMMHHHHHEEEEEEEERRRRE"),O(f.concat(e)),c("Added ".concat(x)),setTimeout((function(){c(null)}),5e3)})).catch((function(e){console.log("ADDNEWCONTACTERROR:");var n="Other eRRORRRR";if(e.response.data.error)e.response.data.error;console.log(n),c(n),setTimeout((function(){c(null)}),5e3)}));else if(f[n].number!==T){var o=f[n].name;window.confirm("Changing number of ".concat(o,"?"))&&(function(e,n){var t=Object(u.a)(Object(u.a)({},e),{},{number:n});return l.a.put(m+"/"+e.id,t).then((function(e){return e.data}))}(f[n],T).then((function(e){O(f.map((function(n){return n.id!==e.id?n:e}))),c("Updated number for ".concat(o)),setTimeout((function(){c(null)}),5e3)})).catch((function(e){alert("Failed updating number!"),console.log(e)})),console.log(t))}else alert("".concat(x," with number ").concat(T," is already added to phonebook"));else c("Give name and number."),setTimeout((function(){c(null)}),5e3);v(""),F("")},nameTxt:x,numTxt:T,editNameFunc:function(e){return v(e.target.value)},editNumberFunc:function(e){return F(e.target.value)}}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(d,{phonebook:f,filter_str:I,deleteFunc:function(e){var n;window.confirm("Really want to remove ".concat(e.name," ?"))&&(n=e.id,l.a.delete(m+"/"+n).then((function(e){return e.data}))).then((function(){O(f.filter((function(n){return n.id!==e.id}))),c("Deleted ".concat(e.name)),setTimeout((function(){c(null)}),5e3)})).catch((function(){alert("Something wrong - could not remove contact ".concat(e.name))}))}})]})};o.a.render(Object(s.jsx)(O,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.126cc217.chunk.js.map